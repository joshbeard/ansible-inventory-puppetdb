# This is the configuration file for the Ansible plugin for PuppetDB inventory.
#
# Author: David Moreau Simard <dmsimard@iweb.com>
#
# == Parameters
# - cache_duration: How long should cache persist until refreshed automatically
# - cache_file: Where to store the inventory cache
# - create_unknown_groups: Boolean for enabling creation of '<fact_name>-unknown' group (default: False)
# - exclude_unknown_facts: Array of fact names to ignore for creating unknown groups if fact has no value
# - full_group_names: Create Descriptive Group names - `kernel-3.2` rather than `3.2`
# - group_by: Array of fact names for creating ansible inventory groups
# - host: Host on which to connect to for PuppetDB
# - hostvars: Boolean for enabling/disabling hostvar generation
# - limit: Whether to Limit Node Query
# - limit_value: Numerical value for limiting node query
# - port: PuppetDB jetty port
# - ssl_cert: Path to SSL client cert
# - ssl_key: Path to SSL client key
# - ssl_verify: Whether or not to verify SSL certificate
# - timeout: Timeout for connection
# - token: RBAC token string for PuppetDB
#
# == Notes on group_by
# This will generate ansible-compatible groups based on fact values
# For example, if you want to group hosts based on the 'kernelversion' fact,
# set group_by to 'kernelversion'.
# This will generate something like this:
# "3.2": {
#   hosts: [ 'server1', 'server2' ]
# },
# "3.13": {
#   hosts: [ 'server3', 'server4' ]
# },
# "3.16": {
#   hosts: [ 'server5' ]
# }
#
# == Notes on group_by_tags
# This will generate ansible-compatible groups based on tag values
# For example, if you want to group hosts based on the Puppet Class tag you tag
# in your Puppet code "web-development" set group_by to this:
#
# group_by_tag:
#   - Class: web-development
#   - Class: web-production
#
# This will generate something like this:
# "web-development": {
#   hosts: [ 'node01-dev.domain.tld', 'node02-dev.domain.tld' ]
# }
# "web-production": {
#   hosts: [ 'node01-production.domain.tld', 'node02-production.domain.tld' ]
# }
#
# Regardless of whether or not group_by is set, the inventory will
# always return a group called 'all' with all the hosts in it.
#
---
cache_duration: 30
cache_file: '/tmp/ansible-inventory-puppetdb.cache'
create_unknown_groups: True
exclude_unknown_facts:
full_group_names: True
group_by:
group_by_tag:
group_by_pql:
host: 'localhost'
hostvars: True
limit: False
limit_value: None
port: 8080
ssl_cert: None
ssl_key: None
ssl_verify: False
timeout: 10
token: None
# Used for PQL queries when 'group_by_pql' is true
# For example:
#   groups:
#     dev:
#       pql: >
#         inventory {
#           facts.org.apptier = "development"
#           and facts.kernel = "Linux"
#         }
#       # Optional dict of hostvars to set
#       hostvars: {}
groups: {}
